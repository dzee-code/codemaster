<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CodeMaster Quiz</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Base Styles */
        :root {
            --primary-color: #6c5ce7;
            --secondary-color: #a29bfe;
            --accent-color: #fd79a8;
            --dark-color: #2d3436;
            --light-color: #f5f6fa;
            --correct-color: #00b894;
            --incorrect-color: #d63031;
            --timer-color: #e17055;
            --box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--light-color);
            color: var(--dark-color);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .quiz-container {
            width: 100%;
            max-width: 800px;
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: var(--box-shadow);
            position: relative;
            min-height: 500px;
        }

        /* Welcome Screen Styles */
        .welcome-screen {
            padding: 40px;
            text-align: center;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 500px;
        }

        .welcome-screen.active {
            display: flex;
            animation: fadeIn 0.5s ease;
        }

        .logo-animation {
            margin-bottom: 30px;
            animation: bounce 2s infinite;
        }

        .code-bracket {
            font-size: 60px;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .welcome-screen h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(to right, var(--primary-color), var(--accent-color));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .welcome-text {
            font-size: 1.1rem;
            margin-bottom: 30px;
            color: #666;
            max-width: 600px;
        }

        .difficulty-selector {
            margin: 30px 0;
        }

        .difficulty-selector h2 {
            margin-bottom: 15px;
            color: var(--dark-color);
        }

        .difficulty-options {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .difficulty-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 50px;
            background: var(--light-color);
            color: var(--dark-color);
            font-weight: bold;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .difficulty-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        .difficulty-btn[data-difficulty="easy"] {
            background: linear-gradient(to right, #00b894, #55efc4);
            color: white;
        }

        .difficulty-btn[data-difficulty="medium"] {
            background: linear-gradient(to right, #0984e3, #74b9ff);
            color: white;
        }

        .difficulty-btn[data-difficulty="hard"] {
            background: linear-gradient(to right, #d63031, #ff7675);
            color: white;
        }

        .start-btn {
            padding: 15px 40px;
            border: none;
            border-radius: 50px;
            background: var(--primary-color);
            color: white;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            margin-top: 20px;
        }

        .start-btn:hover {
            background: var(--accent-color);
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.25);
        }

        /* Category Screen Styles */
        .category-screen {
            padding: 40px;
            display: none;
            flex-direction: column;
            min-height: 500px;
        }

        .category-screen h2 {
            text-align: center;
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--primary-color);
        }

        .category-screen p {
            text-align: center;
            margin-bottom: 30px;
            color: #666;
        }

        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .category-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border: 2px solid transparent;
        }

        .category-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
        }

        .category-card.selected {
            border-color: var(--primary-color);
            background: rgba(108, 92, 231, 0.1);
        }

        .category-card i {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }

        .category-card[data-category="html"] i {
            color: #e34c26;
        }

        .category-card[data-category="css"] i {
            color: #264de4;
        }

        .category-card[data-category="javascript"] i {
            color: #f0db4f;
        }

        .category-card[data-category="python"] i {
            color: #3776ab;
        }

        .category-card[data-category="algorithms"] i,
        .category-card[data-category="datastructures"] i {
            color: var(--primary-color);
        }

        .category-card[data-category="git"] i {
            color: #f1502f;
        }

        .category-card[data-category="web"] i {
            color: var(--accent-color);
        }

        .category-card span {
            font-weight: bold;
            font-size: 1.1rem;
        }

        .proceed-btn {
            padding: 15px 40px;
            border: none;
            border-radius: 50px;
            background: var(--primary-color);
            color: white;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            align-self: center;
            opacity: 0.5;
        }

        .proceed-btn:not(:disabled) {
            opacity: 1;
            background: var(--accent-color);
        }

        .proceed-btn:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.25);
        }

        /* Quiz Screen Styles */
        .quiz-screen {
            padding: 30px;
            display: none;
            flex-direction: column;
            min-height: 500px;
        }

        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .quiz-progress {
            flex: 1;
            max-width: 60%;
        }

        .progress-bar {
            height: 8px;
            background: #eee;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 5px;
        }

        .progress-bar::after {
            content: '';
            display: block;
            height: 100%;
            width: 10%;
            background: var(--primary-color);
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        .progress-text {
            font-size: 0.9rem;
            color: #666;
        }

        .quiz-timer {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1.2rem;
            color: var(--timer-color);
            font-weight: bold;
        }

        .question-container {
            margin-bottom: 30px;
            background: #f9f9f9;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
        }

        .question-category {
            color: var(--primary-color);
            font-size: 0.9rem;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .question-text {
            font-size: 1.3rem;
            margin-bottom: 20px;
            line-height: 1.4;
        }

        .code-snippet {
            background: #2d3436;
            color: #f5f6fa;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            margin: 15px 0;
        }

        .options-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-bottom: 30px;
        }

        .option-btn {
            padding: 15px;
            border: 2px solid #eee;
            border-radius: 10px;
            background: white;
            font-size: 1rem;
            text-align: left;
            cursor: pointer;
            transition: var(--transition);
        }

        .option-btn:hover {
            border-color: var(--secondary-color);
            transform: translateX(5px);
        }

        .option-btn.correct {
            background: var(--correct-color);
            color: white;
            border-color: var(--correct-color);
        }

        .option-btn.incorrect {
            background: var(--incorrect-color);
            color: white;
            border-color: var(--incorrect-color);
        }

        .quiz-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: auto;
        }

        .nav-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 50px;
            background: var(--light-color);
            color: var(--dark-color);
            font-weight: bold;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-btn:hover:not(:disabled) {
            background: var(--primary-color);
            color: white;
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Results Screen Styles */
        .results-screen {
            padding: 40px;
            display: none;
            flex-direction: column;
            min-height: 500px;
        }

        .results-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .results-header h2 {
            font-size: 2rem;
            color: var(--primary-color);
            margin-bottom: 20px;
        }

        .score-container {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: conic-gradient(var(--primary-color) 85%, #eee 0%);
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
            animation: grow 1s ease;
        }

        .score-percent {
            font-size: 2.5rem;
            font-weight: bold;
            color: white;
        }

        .score-message {
            font-size: 1.3rem;
            font-weight: bold;
            color: var(--dark-color);
        }

        .results-details {
            display: grid;
            grid-template-columns: 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .result-category h3,
        .result-summary h3 {
            font-size: 1.3rem;
            margin-bottom: 20px;
            color: var(--primary-color);
        }

        .category-stats {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
        }

        .stat-item {
            display: grid;
            grid-template-columns: 120px 1fr 50px;
            align-items: center;
            gap: 15px;
        }

        .stat-category {
            font-weight: bold;
        }

        .stat-bar {
            height: 10px;
            background: #eee;
            border-radius: 5px;
            overflow: hidden;
        }

        .stat-fill {
            height: 100%;
            background: var(--primary-color);
            border-radius: 5px;
            transition: width 1s ease;
        }

        .stat-percent {
            text-align: right;
            font-weight: bold;
        }

        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 20px;
        }

        .summary-item {
            background: #f9f9f9;
            border-radius: 10px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .summary-item i {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .summary-item i.fa-check-circle {
            color: var(--correct-color);
        }

        .summary-item i.fa-times-circle {
            color: var(--incorrect-color);
        }

        .summary-item i.fa-clock {
            color: var(--timer-color);
        }

        .summary-item i.fa-trophy {
            color: #fdcb6e;
        }

        .summary-label {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 5px;
        }

        .summary-value {
            font-size: 1.2rem;
            font-weight: bold;
        }

        .results-actions {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: auto;
        }

        .action-btn {
            padding: 15px 30px;
            border: none;
            border-radius: 50px;
            background: var(--light-color);
            color: var(--dark-color);
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .action-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .review-btn {
            background: var(--primary-color);
            color: white;
        }

        .restart-btn {
            background: var(--accent-color);
            color: white;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        @keyframes grow {
            from { transform: scale(0); }
            to { transform: scale(1); }
        }

        /* Responsive Styles */
        @media (max-width: 768px) {
            .quiz-container {
                min-height: auto;
            }

            .welcome-screen,
            .category-screen,
            .quiz-screen,
            .results-screen {
                padding: 25px;
                min-height: auto;
            }

            .category-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }

            .difficulty-options {
                flex-direction: column;
                align-items: center;
            }

            .quiz-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .quiz-progress {
                max-width: 100%;
                width: 100%;
            }

            .results-details {
                grid-template-columns: 1fr;
            }

            .summary-grid {
                grid-template-columns: 1fr 1fr;
            }

            .results-actions {
                flex-direction: column;
                gap: 15px;
            }

            .action-btn {
                width: 100%;
                justify-content: center;
            }
        }

        @media (max-width: 480px) {
            .welcome-screen h1 {
                font-size: 2rem;
            }

            .code-bracket {
                font-size: 40px;
            }

            .category-grid {
                grid-template-columns: 1fr 1fr;
            }

            .stat-item {
                grid-template-columns: 100px 1fr 40px;
                gap: 10px;
            }

            .summary-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="quiz-container">
        <!-- Welcome Screen -->
        <div class="welcome-screen active">
            <div class="logo-animation">
                <div class="code-bracket">{ }</div>
                <h1>CodeMaster</h1>
            </div>
            <p class="welcome-text">Test your coding knowledge across multiple languages and concepts!</p>
            <div class="difficulty-selector">
                <h2>Select Difficulty:</h2>
                <div class="difficulty-options">
                    <button class="difficulty-btn" data-difficulty="easy">Beginner</button>
                    <button class="difficulty-btn" data-difficulty="medium">Intermediate</button>
                    <button class="difficulty-btn" data-difficulty="hard">Expert</button>
                </div>
            </div>
            <button class="start-btn">Start Quiz</button>
        </div>

        <!-- Category Selection -->
        <div class="category-screen">
            <h2>Choose Your Categories</h2>
            <p>Select at least 3 categories to proceed</p>
            <div class="category-grid">
                <div class="category-card" data-category="html">
                    <i class="fab fa-html5"></i>
                    <span>HTML</span>
                </div>
                <div class="category-card" data-category="css">
                    <i class="fab fa-css3-alt"></i>
                    <span>CSS</span>
                </div>
                <div class="category-card" data-category="javascript">
                    <i class="fab fa-js-square"></i>
                    <span>JavaScript</span>
                </div>
                <div class="category-card" data-category="python">
                    <i class="fab fa-python"></i>
                    <span>Python</span>
                </div>
                <div class="category-card" data-category="algorithms">
                    <i class="fas fa-project-diagram"></i>
                    <span>Algorithms</span>
                </div>
                <div class="category-card" data-category="datastructures">
                    <i class="fas fa-database"></i>
                    <span>Data Structures</span>
                </div>
                <div class="category-card" data-category="git">
                    <i class="fab fa-git-alt"></i>
                    <span>Git</span>
                </div>
                <div class="category-card" data-category="web">
                    <i class="fas fa-globe"></i>
                    <span>Web Concepts</span>
                </div>
            </div>
            <button class="proceed-btn" disabled>Proceed to Quiz</button>
        </div>

        <!-- Quiz Screen -->
        <div class="quiz-screen">
            <div class="quiz-header">
                <div class="quiz-progress">
                    <div class="progress-bar"></div>
                    <span class="progress-text">Question 1/10</span>
                </div>
                <div class="quiz-timer">
                    <i class="fas fa-clock"></i>
                    <span class="time-remaining">30</span>
                </div>
            </div>
            <div class="question-container">
                <h3 class="question-category">JavaScript</h3>
                <h2 class="question-text">What is the output of the following code?</h2>
                <div class="code-snippet">
                    <pre>console.log(typeof null);</pre>
                </div>
            </div>
            <div class="options-container">
                <button class="option-btn">undefined</button>
                <button class="option-btn">null</button>
                <button class="option-btn">object</button>
                <button class="option-btn">string</button>
            </div>
            <div class="quiz-navigation">
                <button class="nav-btn prev-btn" disabled><i class="fas fa-arrow-left"></i> Previous</button>
                <button class="nav-btn next-btn">Next <i class="fas fa-arrow-right"></i></button>
            </div>
        </div>

        <!-- Results Screen -->
        <div class="results-screen">
            <div class="results-header">
                <h2>Quiz Completed!</h2>
                <div class="score-container">
                    <div class="score-circle">
                        <span class="score-percent">85</span>%
                    </div>
                    <p class="score-message">Great job! You're a coding pro!</p>
                </div>
            </div>
            <div class="results-details">
                <div class="result-category">
                    <h3>Category Breakdown</h3>
                    <div class="category-stats">
                        <div class="stat-item">
                            <span class="stat-category">JavaScript</span>
                            <div class="stat-bar">
                                <div class="stat-fill" style="width: 90%"></div>
                            </div>
                            <span class="stat-percent">90%</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-category">HTML</span>
                            <div class="stat-bar">
                                <div class="stat-fill" style="width: 80%"></div>
                            </div>
                            <span class="stat-percent">80%</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-category">CSS</span>
                            <div class="stat-bar">
                                <div class="stat-fill" style="width: 85%"></div>
                            </div>
                            <span class="stat-percent">85%</span>
                        </div>
                    </div>
                </div>
                <div class="result-summary">
                    <h3>Summary</h3>
                    <div class="summary-grid">
                        <div class="summary-item">
                            <i class="fas fa-check-circle"></i>
                            <span class="summary-label">Correct</span>
                            <span class="summary-value">17</span>
                        </div>
                        <div class="summary-item">
                            <i class="fas fa-times-circle"></i>
                            <span class="summary-label">Incorrect</span>
                            <span class="summary-value">3</span>
                        </div>
                        <div class="summary-item">
                            <i class="fas fa-clock"></i>
                            <span class="summary-label">Time Taken</span>
                            <span class="summary-value">4:32</span>
                        </div>
                        <div class="summary-item">
                            <i class="fas fa-trophy"></i>
                            <span class="summary-label">Score</span>
                            <span class="summary-value">85%</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="results-actions">
                <button class="action-btn review-btn"><i class="fas fa-list"></i> Review Answers</button>
                <button class="action-btn restart-btn"><i class="fas fa-redo"></i> Try Again</button>
            </div>
        </div>
    </div>

    <script>
        // Quiz Data
        const quizData = {
            easy: {
                html: [
                    {
                        question: "What does HTML stand for?",
                        options: [
                            "Hyper Text Markup Language",
                            "High Tech Modern Language",
                            "Hyperlinks and Text Markup Language",
                            "Home Tool Markup Language"
                        ],
                        answer: 0,
                        code: ""
                    },
                    {
                        question: "Which tag is used to create a hyperlink in HTML?",
                        options: [
                            "<link>",
                            "<a>",
                            "<href>",
                            "<hyperlink>"
                        ],
                        answer: 1,
                        code: ""
                    }
                ],
                css: [
                    {
                        question: "Which property is used to change the text color in CSS?",
                        options: [
                            "text-color",
                            "font-color",
                            "color",
                            "text-style"
                        ],
                        answer: 2,
                        code: ""
                    },
                    {
                        question: "How do you select an element with id 'header' in CSS?",
                        options: [
                            ".header",
                            "#header",
                            "*header",
                            "header"
                        ],
                        answer: 1,
                        code: ""
                    }
                ],
                javascript: [
                    {
                        question: "Which keyword is used to declare a variable in JavaScript?",
                        options: [
                            "var",
                            "let",
                            "const",
                            "All of the above"
                        ],
                        answer: 3,
                        code: ""
                    },
                    {
                        question: "What is the output of the following code?",
                        options: [
                            "undefined",
                            "null",
                            "object",
                            "string"
                        ],
                        answer: 2,
                        code: "console.log(typeof null);"
                    }
                ]
            },
            medium: {
                html: [
                    {
                        question: "What is the purpose of the <meta> tag in HTML?",
                        options: [
                            "To create metadata about the document",
                            "To link to external CSS files",
                            "To define a section of navigation links",
                            "To embed multimedia content"
                        ],
                        answer: 0,
                        code: ""
                    },
                    {
                        question: "Which attribute is used to make a checkbox checked by default?",
                        options: [
                            "selected",
                            "checked",
                            "default",
                            "on"
                        ],
                        answer: 1,
                        code: ""
                    }
                ],
                css: [
                    {
                        question: "What does the 'flex: 1' property do in CSS Flexbox?",
                        options: [
                            "Makes the item inflexible",
                            "Sets the item to grow and shrink as needed",
                            "Forces the item to maintain its original size",
                            "Aligns the item to the center"
                        ],
                        answer: 1,
                        code: ""
                    },
                    {
                        question: "What is the CSS specificity value for the selector '#nav .item a:hover'?",
                        options: [
                            "0,1,1,2",
                            "0,1,2,1",
                            "1,1,1,1",
                            "1,2,1"
                        ],
                        answer: 1,
                        code: ""
                    }
                ],
                javascript: [
                    {
                        question: "What is the output of the following code?",
                        options: [
                            "1,2,3",
                            "3,3,3",
                            "1,2,3,4",
                            "undefined"
                        ],
                        answer: 1,
                        code: "for (var i = 1; i <= 3; i++) {\n  setTimeout(() => console.log(i), 0);\n}"
                    },
                    {
                        question: "What does the 'this' keyword refer to in a JavaScript object method?",
                        options: [
                            "The window object",
                            "The method itself",
                            "The object that owns the method",
                            "The parent object"
                        ],
                        answer: 2,
                        code: ""
                    }
                ]
            },
            hard: {
                html: [
                    {
                        question: "What is the purpose of the <datalist> element in HTML5?",
                        options: [
                            "To create a dropdown list of options",
                            "To provide autocomplete suggestions for input elements",
                            "To store data that can be used by JavaScript",
                            "To define a list of key-value pairs"
                        ],
                        answer: 1,
                        code: ""
                    },
                    {
                        question: "Which HTML5 API allows web applications to store data locally in the user's browser?",
                        options: [
                            "Web Storage API",
                            "Geolocation API",
                            "Web Workers API",
                            "Drag and Drop API"
                        ],
                        answer: 0,
                        code: ""
                    }
                ],
                css: [
                    {
                        question: "What is the difference between 'em' and 'rem' units in CSS?",
                        options: [
                            "'em' is relative to the root element, 'rem' is relative to the parent",
                            "'em' is relative to the parent, 'rem' is relative to the root",
                            "They are identical and can be used interchangeably",
                            "'em' is for font sizes, 'rem' is for margins"
                        ],
                        answer: 1,
                        code: ""
                    },
                    {
                        question: "What does the 'will-change' CSS property do?",
                        options: [
                            "Predicts which properties will change for better rendering",
                            "Forces a property to change immediately",
                            "Prevents certain properties from changing",
                            "Animates properties automatically"
                        ],
                        answer: 0,
                        code: ""
                    }
                ],
                javascript: [
                    {
                        question: "What is the output of the following code?",
                        options: [
                            "Promise {<pending>}",
                            "1, 2, 3",
                            "2, 3, 1",
                            "3, 2, 1"
                        ],
                        answer: 2,
                        code: "console.log(1);\nsetTimeout(() => console.log(2), 0);\nPromise.resolve(3).then(console.log);"
                    },
                    {
                        question: "What is a closure in JavaScript?",
                        options: [
                            "A function that has access to its own scope, outer function's scope, and global scope",
                            "A way to close or terminate a function",
                            "A method for encapsulating private data",
                            "A special type of loop"
                        ],
                        answer: 0,
                        code: ""
                    }
                ]
            }
        };

        // DOM Elements
        const welcomeScreen = document.querySelector('.welcome-screen');
        const categoryScreen = document.querySelector('.category-screen');
        const quizScreen = document.querySelector('.quiz-screen');
        const resultsScreen = document.querySelector('.results-screen');
        const difficultyBtns = document.querySelectorAll('.difficulty-btn');
        const startBtn = document.querySelector('.start-btn');
        const categoryCards = document.querySelectorAll('.category-card');
        const proceedBtn = document.querySelector('.proceed-btn');
        const progressBar = document.querySelector('.progress-bar');
        const progressText = document.querySelector('.progress-text');
        const timerElement = document.querySelector('.time-remaining');
        const questionCategory = document.querySelector('.question-category');
        const questionText = document.querySelector('.question-text');
        const codeSnippet = document.querySelector('.code-snippet pre');
        const optionsContainer = document.querySelector('.options-container');
        const prevBtn = document.querySelector('.prev-btn');
        const nextBtn = document.querySelector('.next-btn');
        const scorePercent = document.querySelector('.score-percent');
        const scoreMessage = document.querySelector('.score-message');
        const categoryStats = document.querySelector('.category-stats');
        const reviewBtn = document.querySelector('.review-btn');
        const restartBtn = document.querySelector('.restart-btn');

        // Quiz State
        let currentDifficulty = '';
        let selectedCategories = [];
        let currentQuestions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let timer;
        let timeLeft = 30;
        let userAnswers = [];
        let startTime;

        // Event Listeners
        difficultyBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                difficultyBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentDifficulty = btn.dataset.difficulty;
            });
        });

        startBtn.addEventListener('click', startQuiz);
        
        categoryCards.forEach(card => {
            card.addEventListener('click', () => {
                card.classList.toggle('selected');
                const category = card.dataset.category;
                
                if (card.classList.contains('selected')) {
                    selectedCategories.push(category);
                } else {
                    selectedCategories = selectedCategories.filter(c => c !== category);
                }
                
                proceedBtn.disabled = selectedCategories.length < 3;
            });
        });

        proceedBtn.addEventListener('click', beginQuiz);
        nextBtn.addEventListener('click', nextQuestion);
        prevBtn.addEventListener('click', previousQuestion);
        restartBtn.addEventListener('click', restartQuiz);

        // Functions
        function startQuiz() {
            if (!currentDifficulty) {
                alert('Please select a difficulty level');
                return;
            }
            
            welcomeScreen.classList.remove('active');
            categoryScreen.style.display = 'flex';
            setTimeout(() => categoryScreen.style.opacity = 1, 10);
        }

        function beginQuiz() {
            // Compile questions from selected categories
            currentQuestions = [];
            selectedCategories.forEach(category => {
                if (quizData[currentDifficulty][category]) {
                    currentQuestions = currentQuestions.concat(quizData[currentDifficulty][category]);
                }
            });
            
            // Shuffle questions
            currentQuestions = shuffleArray(currentQuestions).slice(0, 10);
            
            categoryScreen.style.opacity = 0;
            setTimeout(() => {
                categoryScreen.style.display = 'none';
                quizScreen.style.display = 'flex';
                setTimeout(() => quizScreen.style.opacity = 1, 10);
                loadQuestion();
                startTimer();
                startTime = new Date();
            }, 300);
        }

        function loadQuestion() {
            const question = currentQuestions[currentQuestionIndex];
            
            // Update progress
            const progressPercent = ((currentQuestionIndex + 1) / currentQuestions.length) * 100;
            progressBar.style.width = `${progressPercent}%`;
            progressText.textContent = `Question ${currentQuestionIndex + 1}/${currentQuestions.length}`;
            
            // Update question
            questionCategory.textContent = selectedCategories.find(c => 
                quizData[currentDifficulty][c]?.includes(question)
            );
            questionText.textContent = question.question;
            
            if (question.code) {
                codeSnippet.textContent = question.code;
                codeSnippet.parentElement.style.display = 'block';
            } else {
                codeSnippet.parentElement.style.display = 'none';
            }
            
            // Update options
            optionsContainer.innerHTML = '';
            question.options.forEach((option, index) => {
                const optionBtn = document.createElement('button');
                optionBtn.className = 'option-btn';
                optionBtn.textContent = option;
                optionBtn.addEventListener('click', () => selectAnswer(index));
                optionsContainer.appendChild(optionBtn);
                
                // Highlight if already answered
                if (userAnswers[currentQuestionIndex] !== undefined) {
                    if (index === question.answer) {
                        optionBtn.classList.add('correct');
                    } else if (index === userAnswers[currentQuestionIndex] && index !== question.answer) {
                        optionBtn.classList.add('incorrect');
                    }
                }
            });
            
            // Update navigation buttons
            prevBtn.disabled = currentQuestionIndex === 0;
            nextBtn.textContent = currentQuestionIndex === currentQuestions.length - 1 ? 'Finish' : 'Next';
        }

        function selectAnswer(selectedIndex) {
            const question = currentQuestions[currentQuestionIndex];
            
            // Prevent changing answer after selection
            if (userAnswers[currentQuestionIndex] !== undefined) return;
            
            // Store user answer
            userAnswers[currentQuestionIndex] = selectedIndex;
            
            // Update score if correct
            if (selectedIndex === question.answer) {
                score++;
            }
            
            // Highlight correct and incorrect answers
            const optionBtns = document.querySelectorAll('.option-btn');
            optionBtns.forEach((btn, index) => {
                btn.disabled = true;
                if (index === question.answer) {
                    btn.classList.add('correct');
                } else if (index === selectedIndex && index !== question.answer) {
                    btn.classList.add('incorrect');
                }
            });
            
            // Auto proceed to next question after delay
            if (currentQuestionIndex < currentQuestions.length - 1) {
                setTimeout(() => {
                    nextQuestion();
                }, 1500);
            }
        }

        function nextQuestion() {
            if (currentQuestionIndex < currentQuestions.length - 1) {
                currentQuestionIndex++;
                resetTimer();
                loadQuestion();
            } else {
                finishQuiz();
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                resetTimer();
                loadQuestion();
            }
        }

        function finishQuiz() {
            clearInterval(timer);
            
            const endTime = new Date();
            const timeTaken = Math.floor((endTime - startTime) / 1000);
            const minutes = Math.floor(timeTaken / 60);
            const seconds = timeTaken % 60;
            const timeString = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            
            // Calculate score percentage
            const scorePercentage = Math.round((score / currentQuestions.length) * 100);
            scorePercent.textContent = scorePercentage;
            
            // Set score message
            if (scorePercentage >= 90) {
                scoreMessage.textContent = "Perfect! You're a coding genius!";
            } else if (scorePercentage >= 70) {
                scoreMessage.textContent = "Great job! You're a coding pro!";
            } else if (scorePercentage >= 50) {
                scoreMessage.textContent = "Good effort! Keep practicing!";
            } else {
                scoreMessage.textContent = "Keep learning! You'll get better!";
            }
            
            // Update category stats
            categoryStats.innerHTML = '';
            selectedCategories.forEach(category => {
                const categoryQuestions = currentQuestions.filter(q => 
                    quizData[currentDifficulty][category]?.includes(q)
                );
                
                if (categoryQuestions.length > 0) {
                    const correctAnswers = categoryQuestions.filter((q, index) => {
                        const globalIndex = currentQuestions.indexOf(q);
                        return userAnswers[globalIndex] === q.answer;
                    }).length;
                    
                    const percentage = Math.round((correctAnswers / categoryQuestions.length) * 100);
                    
                    const statItem = document.createElement('div');
                    statItem.className = 'stat-item';
                    statItem.innerHTML = `
                        <span class="stat-category">${category.charAt(0).toUpperCase() + category.slice(1)}</span>
                        <div class="stat-bar">
                            <div class="stat-fill" style="width: ${percentage}%"></div>
                        </div>
                        <span class="stat-percent">${percentage}%</span>
                    `;
                    categoryStats.appendChild(statItem);
                }
            });
            
            // Update summary
            document.querySelector('.summary-value:nth-child(1)').textContent = score;
            document.querySelector('.summary-value:nth-child(2)').textContent = currentQuestions.length - score;
            document.querySelector('.summary-value:nth-child(3)').textContent = timeString;
            document.querySelector('.summary-value:nth-child(4)').textContent = `${scorePercentage}%`;
            
            // Show results screen
            quizScreen.style.opacity = 0;
            setTimeout(() => {
                quizScreen.style.display = 'none';
                resultsScreen.style.display = 'flex';
                setTimeout(() => resultsScreen.style.opacity = 1, 10);
            }, 300);
        }

        function restartQuiz() {
            // Reset quiz state
            currentQuestionIndex = 0;
            score = 0;
            userAnswers = [];
            selectedCategories = [];
            
            // Reset UI
            document.querySelectorAll('.category-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            proceedBtn.disabled = true;
            
            // Show welcome screen
            resultsScreen.style.opacity = 0;
            setTimeout(() => {
                resultsScreen.style.display = 'none';
                welcomeScreen.classList.add('active');
            }, 300);
        }

        function startTimer() {
            clearInterval(timer);
            timeLeft = 30;
            timerElement.textContent = timeLeft;
            
            timer = setInterval(() => {
                timeLeft--;
                timerElement.textContent = timeLeft;
                
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    if (currentQuestionIndex < currentQuestions.length - 1) {
                        nextQuestion();
                    } else {
                        finishQuiz();
                    }
                }
            }, 1000);
        }

        function resetTimer() {
            clearInterval(timer);
            timeLeft = 30;
            timerElement.textContent = timeLeft;
            startTimer();
        }

        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }
    </script>
</body>
</html>
